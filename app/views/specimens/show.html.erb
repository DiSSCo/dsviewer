<div class = "container">
	<p id="notice"><%= notice %></p>
	  <% @do_schema["properties"].each do |field|  %>
	      <% field_name = field[0].gsub('/','_') %>
	      <% field_name = field_name.gsub(' ','_') %>
	      <% field_title = field[1]["title"].to_s %>
	      <% field_format = field[1]["format"].to_s %>
	      <% if field_title == "" %>
		<%  field_title = field[0] %>
	      <% end %>
	      <% field_name = "@" + field_name %>
	      <% f_value = @dsdatum.instance_variable_get(field_name .to_sym) %>
	      <% if field[1]["type"] == "string" && (field[1]["format"] == "uri" || field[1]["format"] == "handle") %>
		  <%= render partial: 'urifield', locals: {field_title: field_title, field_value: f_value} %> 
	      <% elsif field[1]["type"] == "string" %>
		  <%= render partial: 'strfield', locals: {field_title: field_title, field_value: f_value} %> 
	      <% elsif field[1]["type"] == "integer" %>
		  <%= render partial: 'intfield', locals: {field_title: field_title, field_value: f_value} %> 
	      <% elsif field[1]["type"] == "array" && field_title.include?("images") %>
		  <%= render partial: 'arrimgs', locals: {field_title: field_title, field_value: f_value} %> 
	      <% elsif field[1]["type"] == "array" && field_title.include?("Long") %>
		  <%= render partial: 'strfield', locals: {field_title: field_title, field_value: f_value} %>
	      <% elsif field[1]["type"] == "array" && field_title.include?("pages") %>
		  <%= render partial: 'strfield', locals: {field_title: field_title, field_value: f_value} %>
	      <% else %>
		  <p><%= field[1] %></p>
	      <% end %>
	  <% end %>
	</p>
	<%= link_to 'back', specimens_path, :class => "btn btn-primary btn-xs" %>
</div>

<div class = "container">
	<div class = "row">
		<div class = "col-md-7">
		  <p class="specimendetails text-center" >Digital Specimen</p>
		  <h2><%= @dsdatum.scientificName %></h2>
		  <div id="accordion">
		    <div class="card">
		      <div class="card-header" id="headingOne">
			<h5 class="mb-0">
			  <button class="btn btn-link" data-toggle="collapse" data-target="#collapseOne" aria-expanded="true" aria-controls="collapseOne">
			    <img src="images/mids0.png" width="40" alt="0 (Catalogue)"/> Catalogue Data
			  </button>
			</h5>
		      </div>
		      <div id="collapseOne" class="collapse show" aria-labelledby="headingOne" data-parent="#accordion">
			<div class="card-body">
			  <p><b>Identifier:</b> <%= @dsdatum.id %></p>
			  <p><b>Created:</b> <%= @dsdatum.id %> </p>
			  <p><b>Creator:</b> <%= @dsdatum.creator %> </p>
			  <p><b>MIDS:</b> <%= @dsdatum.midslevel %> </p>
			  <p><b>Physical Specimen ID:</b> <%= @dsdatum.physicalSpecimenId %></p>
			  <p><b>Institution Code: </b><%= @dsdatum.institutionCode %></p>
			</div>
		       </div>
		      </div>
		      <div class="card">
			<div class="card-header" id="headingTwo">
			  <h5 class="mb-0">
			    <button class="btn btn-link collapsed" data-toggle="collapse" data-target="#collapseTwo" aria-expanded="false" aria-controls="collapseTwo">
			       <img src="images/mids1.png" width="40" alt="2 (Basic)"/> Basic Data
			    </button>
			  </h5>
			</div>
			<div id="collapseTwo" class="collapse" aria-labelledby="headingTwo" data-parent="#accordion">
			  <div class="card-body">
			    <p><b>persistend ID:</b> <%= @dsdatum.stableIdentifier %></p>
			    <p><b>Name: </b><%= @dsdatum.scientificName %></p>
			    <p><b>Geographical Region: </b></p>
			      <ul>
				<li><b>Country: </b><%= @dsdatum.country %></li>
				<li><b>Locality: </b><%= @dsdatum.locality %></li>
			      </ul>
			  </div>
			</div>
		      </div>
		      <div class="card">
			<div class="card-header" id="headingThree">
			  <h5 class="mb-0">
			    <button class="btn btn-link collapsed" data-toggle="collapse" data-target="#collapseThree" aria-expanded="false" aria-controls="collapseThree">
			      <img src="images/mids2.png" width="40" alt="2 (Key)"/> Regular Data
			    </button>
			  </h5>
			</div>
			<div id="collapseThree" class="collapse" aria-labelledby="headingThree" data-parent="#accordion">
			  <div class="card-body">
			    <p><b>Geo Location: </b><%= @dsdatum.decimalLat_Long %></p>
			    <p><b>Collected by: </b><%= @dsdatum.recordedBy %></p>
			    <p><b>Collection date: </b><%= @dsdatum.collectionDate %></p>
			    <p><b>Collection Code: </b><%= @dsdatum.collectionCode %></p>
			  </div>
			</div>
		      </div>
		      <div class="card">
			<div class="card-header" id="headingFour">
			  <h5 class="mb-0">
			    <button class="btn btn-link collapsed" data-toggle="collapse" data-target="#collapseFour" aria-expanded="false" aria-controls="collapseFour">
			      <img src="images/mids3.png" width="40" alt="3 (Extended)"/> Extended Data
			    </button>
			  </h5>
			</div>
			<div id="collapseFour" class="collapse" aria-labelledby="headingFour" data-parent="#accordion">
			  <div class="card-body">
			    <p><b>Other Catalogue Number(s): </b>NHMUK:ecatalogue:6913691 </p>
			    <p><b>Preservation: </b>Dry Mounted </p>
			    <p><b>Common Name:</b> July Belle </p>
			    <p><b>Occurrence record (GBIF):</b> https://www.gbif.org/occurrence/1825942165 </p>
			    <p><b>Referred at individual and drawer level (images available):</b></p>
			    <p> Elisa Cane, Jonathan Laventhol, Sophie Ledger (2017). Dataset: Moth Ultraviolet Reflectance Survey. Natural History Museum Data Portal (data.nhm.ac.uk). 
			      <a href="https://doi.org/10.5519/0019732">doi.org/10.5519/0019732</a> Retrieved: 13:31 16 May 2019 (GMT)
			    </p>
			    <p><b>Referred at individual and drawer level (images available):</b></p>
			    <p>Cane, E., J. Laventhol, and S. Ledger. "Surveying Ultraviolet Reflectance in Moths: 
				     A Method and Workflow for Data Capture Using Open-Source Tools." Journal of Natural Science Collections 5 (2018): 50-65. 
				     <a href="https://www.natsca.org/sites/default/files/publications/JoNSC-Vol5-CaneLaventholLedger2018.pdf">
				       https://www.natsca.org/sites/default/files/publications/JoNSC-Vol5-CaneLaventholLedger2018.pdf
				     </a>
			    </p>
			  </div>
			</div>
		      </div>
		    </div><!--End of Accordion-->
			The information is organised in line with the Minimum Information Standard about Digital Specimen (MIDS)
			</div>
		</div>
		<div class = "col-md-5">
		  <div id="carouselExampleControls" class="carousel slide" data-ride="carousel" data-interval="false">
		    <div class="carousel-inner">
		    
		      <div class="carousel-item active">
			<img src="images/BMNHE_1613533_304179-S.jpg" class="d-block w-100" alt="specimen image">
		      </div>
		      <div class="carousel-item">
			<img src="images/BMNHE_1613533_label_304179-S.jpg" class="d-block w-100" alt="labels image">
		      </div>
		      <div class="carousel-item">
			<img src="images/70_041_1.vis.natural-S.jpg" class="d-block w-100" alt="drawer">
		      </div>
		      <div class="carousel-item">
			<img src="http://www.nhm.ac.uk/services/media-store/asset/f10367b5ab7411bc539acc933bcbe7df92cb3d7c/contents/preview" class="d-block w-100" alt="drawer">
		      </div>
		      <div class="carousel-item">
			<img src="http://www.nhm.ac.uk/services/media-store/asset/4caa6b49440c965b5ced6e2524b4ed3265b5011e/contents/preview" class="d-block w-100" alt="drawer">
		      </div>
		      <div class="carousel-item">
			<img src="http://www.nhm.ac.uk/services/media-store/asset/bf246ddb77c5806f64baf635be5b58d20a0931fc/contents/preview" class="d-block w-100" alt="drawer">
		      </div>
		    </div>
		    <a class="carousel-control-prev" href="#carouselExampleControls" role="button" data-slide="prev">
		      <span class="carousel-control-prev-icon" aria-hidden="true"></span>
		      <span class="sr-only">Previous</span>
		    </a>
		    <a class="carousel-control-next" href="#carouselExampleControls" role="button" data-slide="next">
		      <span class="carousel-control-next-icon" aria-hidden="true"></span>
		      <span class="sr-only">Next</span>
		    </a>
		  </div>
        </div>
    </div>
    