<p id="notice"><%= notice %></p>
  <% @do_schema["properties"].each do |field|  %>
      <% field_name = field[0].gsub('/','_') %>
      <% field_name = field_name.gsub(' ','_') %>
      <% field_title = field[1]["title"].to_s %>
      <% field_format = field[1]["format"].to_s %>
      <% if field_title == "" %>
        <%  field_title = field[0] %>
      <% end %>
      <% field_name = "@" + field_name %>
      <% f_value = @dsdatum.instance_variable_get(field_name .to_sym) %>
      <% if field[1]["type"] == "string" && (field[1]["format"] == "uri" || field[1]["format"] == "handle") %>
	  <%= render partial: 'urifield', locals: {field_title: field_title, field_value: f_value} %> 
      <% elsif field[1]["type"] == "string" %>
	  <%= render partial: 'strfield', locals: {field_title: field_title, field_value: f_value} %> 
      <% elsif field[1]["type"] == "integer" %>
	  <%= render partial: 'intfield', locals: {field_title: field_title, field_value: f_value} %> 
      <% elsif field[1]["type"] == "array" && field_title.include?("images") %>
	  <%= render partial: 'arrimgs', locals: {field_title: field_title, field_value: f_value} %> 
      <% elsif field[1]["type"] == "array" && field_title.include?("Long") %>
	  <%= render partial: 'strfield', locals: {field_title: field_title, field_value: f_value} %>
      <% elsif field[1]["type"] == "array" && field_title.include?("pages") %>
	  <%= render partial: 'strfield', locals: {field_title: field_title, field_value: f_value} %>
      <% else %>
          <p><%= field[1] %></p>
      <% end %>
  <% end %>
</p>
<%= link_to 'back', dsdata_path, :class => "btn btn-primary btn-xs" %>

